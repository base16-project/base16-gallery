<pre id='vimCodeElement'>
<span class="Comment">#!/bin/bash</span>

<span class="Statement">set</span><span class="Identifier"> </span><span class="Special">-eu</span><span class="Identifier"> pipefail</span>

<span class="Statement">rm</span> <span class="Special">-rf</span> out
<span class="Statement">mkdir</span> out

<span class="Statement">rm</span> <span class="Special">-rf</span> base16-vim
git clone <span class="Special">--depth</span><span class="Operator">=</span><span class="Number">1</span> <a href="https://github.com/tinted-theming/base16-vim">https://github.com/tinted-theming/base16-vim</a>

<span class="Statement">rm</span> <span class="Special">-rf</span> schemes
git clone <span class="Special">--depth</span><span class="Operator">=</span><span class="Number">1</span> <a href="https://github.com/tinted-theming/schemes">https://github.com/tinted-theming/schemes</a>

<span class="Statement">export</span> <span class="Identifier">COLORSCHEMES</span>=<span class="PreProc">($(</span><span class="Statement">ls</span><span class="Special"> schemes/base16/ </span><span class="Operator">|</span><span class="Special"> </span><span class="Statement">grep</span><span class="Special"> yaml </span><span class="Operator">|</span><span class="Special"> </span><span class="Statement">sed</span><span class="Special"> </span><span class="Operator">'</span><span class="String">s/\..*$//</span><span class="Operator">'</span><span class="PreProc">))</span>

<span class="Statement">for</span> COLORSCHEME <span class="Statement">in</span> <span class="PreProc">${</span><span class="PreProc">COLORSCHEMES</span><span class="PreProc">[</span>@<span class="PreProc">]</span><span class="PreProc">}</span>; <span class="Conditional">do</span>
  <span class="Statement">echo</span><span class="String"> </span><span class="PreProc">$COLORSCHEME</span>

  vim <span class="Special">-es</span> <span class="Conditional">-u</span> NORC <span class="Conditional">-N</span> \
    <span class="Conditional">-c</span> <span class="Operator">'</span><span class="String">silent! set termguicolors</span><span class="Operator">'</span> \
    <span class="Conditional">-c</span> <span class="Operator">'</span><span class="String">silent! set runtimepath+=base16-vim</span><span class="Operator">'</span> \
    <span class="Conditional">-c</span> <span class="Operator">'</span><span class="String">silent! syntax on</span><span class="Operator">'</span> \
    <span class="Conditional">-c</span> <span class="Operator">&quot;</span><span class="String">silent! colorscheme base16-</span><span class="PreProc">$COLORSCHEME</span><span class="Operator">&quot;</span> \
    <span class="Conditional">-c</span> <span class="Operator">'</span><span class="String">silent! TOhtml</span><span class="Operator">'</span> \
    <span class="Conditional">-c</span> <span class="Operator">'</span><span class="String">silent! wqa!</span><span class="Operator">'</span> \
    <span class="PreProc">$0</span> <span class="Conditional">&gt;</span> /dev/null <span class="Number">2</span><span class="Conditional">&gt;</span><span class="Operator">&amp;</span><span class="Number">1</span>

  <span class="Statement">grep</span> <span class="Special">-Pzo</span> <span class="Operator">'</span><span class="String">(?s)&lt;style&gt;.*&lt;/style&gt;</span><span class="Operator">'</span> <span class="PreProc">$0</span>.html \
    <span class="Operator">|</span> <span class="Statement">sed</span> <span class="Operator">&quot;</span><span class="String">3,14!d;s/body/pre/;s/^/#base16-</span><span class="PreProc">$COLORSCHEME</span><span class="String"> /</span><span class="Operator">&quot;</span> \
    <span class="Conditional">&gt;</span> out/<span class="PreProc">$COLORSCHEME</span>.css

  awk <span class="Operator">&quot;</span><span class="String">/&lt;pre id='vimCodeElement'&gt;/,/&lt;\/pre&gt;/</span><span class="Operator">&quot;</span> <span class="PreProc">$0</span>.html \
    <span class="Conditional">&gt;</span> out/<span class="PreProc">$COLORSCHEME</span>.html

  <span class="Statement">rm</span> <span class="Conditional">-f</span> <span class="PreProc">$0</span>.html
<span class="Conditional">done</span>

erb template.erb <span class="Operator">&gt;</span> out/index.html
</pre>
